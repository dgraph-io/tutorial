



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link
  rel="manifest"
  href="https://tour.dgraph.io//images/favicons/manifest.json"
  >
<link
  rel="mask-icon"
  href="https://tour.dgraph.io//images/favicons/safari-pinned-tab.svg"
  color="#fe2c06"
  >
<link
  rel="shortcut icon"
  href="https://tour.dgraph.io//images/favicons/favicon.ico"
  >
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="https://tour.dgraph.io//images/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="https://tour.dgraph.io//images/favicons/browserconfig.xml">

<link rel="apple-touch-icon" sizes="57x57" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://tour.dgraph.io//images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" sizes="32x32" type="image/png" href="https://tour.dgraph.io//images/favicons/favicon-32x32.png">
<link rel="icon" sizes="192x192" type="image/png" href="https://tour.dgraph.io//images/favicons/android-chrome-192x192.png">
<link rel="icon" sizes="194x194" type="image/png" href="https://tour.dgraph.io//images/favicons/favicon-194x194.png">
<link rel="icon" sizes="96x96" type="image/png" href="https://tour.dgraph.io//images/favicons/favicon-96x96.png">
<link rel="icon" sizes="16x16" type="image/png" href="https://tour.dgraph.io//images/favicons/favicon-16x16.png">


    
    <title>
      
        A bigger dataset — A Tour of Dgraph
      
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
      />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:400,700"
      rel="stylesheet"
      />

    <link
      href="https://tour.dgraph.io//css/runnable-custom.css?fd581e09310956d9e7e07a71e2d31145"
      rel="stylesheet"
      />
  </head>
  <body>
    <main>


<nav id="header">
  <a href="https://tour.dgraph.io/" class="brand">
    <img src="https://tour.dgraph.io//images/dgraph.svg" alt="dgraph" class="logo" />
    <span class="name">
      A Tour of Dgraph
    </span>
  </a>
  <select id="tour-release" class="select-release">
      
        <option
          value="master"
          
        >
          Dgraph master
        </option>
      
        <option
          value="1.2.1"
          
            selected="selected"
          
        >
          Dgraph 1.2.1
        </option>
      
        <option
          value="1.1.0"
          
        >
          Dgraph 1.1.0
        </option>
      
  </select>

  <div class="menus">
    <a href="#toggle-sidebar" data-action="toggle-sidebar" class="menu-item">
      <i class="fa fa-bars"></i>
    </a>
  </div>
</nav>

<script>
  window.DgTour = {
    thisRelease: "1.2.1",
    latestRelease: "1.2.1"
  }
</script>




<style>
  .hidden { opacity: 0; }
</style>
<aside id="sidebar" class="hidden">
  
  <ul class="categories">
    <li>
      <div class="category">
        Introduction
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/intro/1/" class="topic">
              Welcome
            </a>
          </li>
        
          <li>
            <a href="/intro/2/" class="topic">
              Run Dgraph
            </a>
          </li>
        
          <li>
            <a href="/intro/3/" class="topic">
              Load Schema
            </a>
          </li>
        
          <li>
            <a href="/intro/4/" class="topic">
              Load Data
            </a>
          </li>
        
          <li>
            <a href="/intro/5/" class="topic">
              Mutation Introduction
            </a>
          </li>
        
          <li>
            <a href="/intro/6/" class="topic">
              Graphs
            </a>
          </li>
        
          <li>
            <a href="/intro/7/" class="topic">
              Graph Databases
            </a>
          </li>
        
          <li>
            <a href="/intro/8/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Basic GraphQL&#43;- features
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/basic/1/" class="topic">
              Hello World
            </a>
          </li>
        
          <li>
            <a href="/basic/2/" class="topic">
              Graphs as results
            </a>
          </li>
        
          <li>
            <a href="/basic/3/" class="topic">
              Data types, Schema and Type System
            </a>
          </li>
        
          <li>
            <a href="/basic/4/" class="topic">
              Language Support
            </a>
          </li>
        
          <li>
            <a href="/basic/5/" class="topic">
              Queries describe graphs
            </a>
          </li>
        
          <li>
            <a href="/basic/6/" class="topic">
              Functions and filtering
            </a>
          </li>
        
          <li>
            <a href="/basic/7/" class="topic">
              AND, OR and NOT
            </a>
          </li>
        
          <li>
            <a href="/basic/8/" class="topic">
              Sorting (orderasc or orderdesc)
            </a>
          </li>
        
          <li>
            <a href="/basic/9/" class="topic">
              Pagination (first, offset and after)
            </a>
          </li>
        
          <li>
            <a href="/basic/10/" class="topic">
              Count
            </a>
          </li>
        
          <li>
            <a href="/basic/11/" class="topic">
              How Dgraph Search Works
            </a>
          </li>
        
          <li>
            <a href="/basic/12/" class="topic">
              Has
            </a>
          </li>
        
          <li>
            <a href="/basic/13/" class="topic">
              Alias
            </a>
          </li>
        
          <li>
            <a href="/basic/14/" class="topic">
              Cascade
            </a>
          </li>
        
          <li>
            <a href="/basic/15/" class="topic">
              Normalize
            </a>
          </li>
        
          <li>
            <a href="/basic/16/" class="topic">
              Comments
            </a>
          </li>
        
          <li>
            <a href="/basic/17/" class="topic">
              Facets : Edge attributes
            </a>
          </li>
        
          <li>
            <a href="/basic/18/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Schema - describe your data
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/schema/1/" class="topic">
              Adding schema - mutating schema
            </a>
          </li>
        
          <li>
            <a href="/schema/2/" class="topic">
              Adding Data - mutating data
            </a>
          </li>
        
          <li>
            <a href="/schema/3/" class="topic">
              External Identifiers
            </a>
          </li>
        
          <li>
            <a href="/schema/4/" class="topic">
              Language Support
            </a>
          </li>
        
          <li>
            <a href="/schema/5/" class="topic">
              Reverse edges
            </a>
          </li>
        
          <li>
            <a href="/schema/6/" class="topic">
              Reverse edges Query
            </a>
          </li>
        
          <li>
            <a href="/schema/7/" class="topic">
              Exercise : Integrating existing data
            </a>
          </li>
        
          <li>
            <a href="/schema/8/" class="topic">
              Deleting Data
            </a>
          </li>
        
          <li>
            <a href="/schema/9/" class="topic">
              Expand Predicate
            </a>
          </li>
        
          <li>
            <a href="/schema/10/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Data, More Data
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/moredata/1/" class="topic active">
              A bigger dataset
            </a>
          </li>
        
          <li>
            <a href="/moredata/2/" class="topic">
              Movies Schema
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Query Blocks, Query Variables and Aggregation
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/blocksvars/1/" class="topic">
              Multiple Named Query Blocks
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/2/" class="topic">
              Query Variables
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/3/" class="topic">
              Query Variables in a child block
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/4/" class="topic">
              Query Variables in another query block I
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/5/" class="topic">
              Query Variables in another query block II
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/6/" class="topic">
              Exercise: Query Variables linking queries
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/7/" class="topic">
              Value variables - min and max
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/8/" class="topic">
              Exercise : Value variables - sum and avg
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/9/" class="topic">
              Value variables: filtering and ordering
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/10/" class="topic">
              Value variables: math functions
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/11/" class="topic">
              Exercise : Latest Movies
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/12/" class="topic">
              GroupBy
            </a>
          </li>
        
          <li>
            <a href="/blocksvars/13/" class="topic">
              Congratulations!
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Search - more ways to find nodes
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/search/1/" class="topic">
              Indexes
            </a>
          </li>
        
          <li>
            <a href="/search/2/" class="topic">
              Term search
            </a>
          </li>
        
          <li>
            <a href="/search/3/" class="topic">
              Regular Expressions
            </a>
          </li>
        
          <li>
            <a href="/search/4/" class="topic">
              Exact index and inequality
            </a>
          </li>
        
          <li>
            <a href="/search/5/" class="topic">
              Full Text Search
            </a>
          </li>
        
          <li>
            <a href="/search/6/" class="topic">
              Full Text Search : language support
            </a>
          </li>
        
          <li>
            <a href="/search/7/" class="topic">
              Geo queries : Near
            </a>
          </li>
        
      </ul>
    </li>
  
</aside>


<div class="lesson-content-wrapper container-fluid">
  <div class="content row vertical-stretch">
    <div class="col-12 col-sm-12 col-md-12 col-lg-6 vertical-stretch">
      <div class="panel">
        <div class="body">
          <h1 class="lesson-heading">A bigger dataset</h1>

          <div>
            <p>Ok, we are off to a start with Dgraph and GraphQL+-.  Let’s move it up
a few notches.</p>
<p>Dgraph can also do query aggregation, geo-queries, string querying and
more.  But for all that let&rsquo;s move from the small datasets we started
with and try out something bigger, much bigger.</p>
<p>In our github repository you&rsquo;ll find a <a href="https://github.com/dgraph-io/tutorial/tree/master/resources/1million.rdf.gz">dataset about movies, directors
and actors</a>.</p>
<p>Download it from that link and save into the <code>~/dgraph</code> directory or by running the following in a terminal</p>
<pre><code>cd ~/dgraph
wget &quot;https://github.com/dgraph-io/tutorial/blob/master/resources/1million.rdf.gz?raw=true&quot; -O 1million.rdf.gz -q
</code></pre><p>Run the schema mutation using the run button and then load the dataset
into Dgraph from the terminal. You may be required to restart the Alpha with <code>--lru_mb 4096</code> in order to handle bigger dataset.</p>
<pre><code>docker exec -it dgraph dgraph live -f 1million.rdf.gz --alpha localhost:9080 --zero localhost:5080 -c 1
</code></pre><p>There&rsquo;s around one million triples in the dataset.
Dgraph reports back exactly how many triples were loaded and how long
it took.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>It&rsquo;s a big database of movies, but it won’t trouble Dgraph.  It is, however, big enough for us to
use more complex queries.</p>
<p>This dataset is a one million triple subset of a <a href="https://github.com/dgraph-io/benchmarks/blob/master/data/21million.rdf.gz">larger dataset of
movies</a>
that contains around 230000 actors and around 86000 movies.  We&rsquo;ve made a subset to
make it quick to load, while having enough complexity to yield
interesting results.  But, because it&rsquo;s a subset, you might find your
favourite actor isn&rsquo;t there, or that some actors are missing some of
their movies.</p>
<p>Later in the tutorial, you might need to refer back to this page (or
issue a <a href="../../basic/3">schema query</a>) to check the indexes or schema types.  Remember that
we can&rsquo;t apply functions to edges that aren&rsquo;t indexed, and we&rsquo;ll learn
that some
functions require particular indexes.</p>

          </div>
        </div>

        <div class="page-nav">
          
            <a href="/schema/10" data-action="go-prev" class="btn btn-secondary btn-sm page-nav-link"><i class="fa fa-chevron-left"></i></a>
          
          <div class="nav-index">
            1 / 2
          </div>
          
            <a href="/moredata/2" data-action="go-next" class="btn btn-secondary btn-sm page-nav-link"><i class="fa fa-chevron-right"></i></a>
          
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-6 vertical-stretch">
      
        
<div class="runnable" data-initial="# Define Directives and index

director.film: [uid] @reverse .
genre: [uid] @reverse .
initial_release_date: dateTime @index(year) .
name: string @index(exact, term) @lang .
starring: [uid] .
performance.film: [uid] .
performance.character_note: string .
performance.character: [uid] .
performance.actor: [uid] .
performance.special_performance_type: [uid] .
type: [uid] .
" data-current="# Define Directives and index

director.film: [uid] @reverse .
genre: [uid] @reverse .
initial_release_date: dateTime @index(year) .
name: string @index(exact, term) @lang .
starring: [uid] .
performance.film: [uid] .
performance.character_note: string .
performance.character: [uid] .
performance.actor: [uid] .
performance.special_performance_type: [uid] .
type: [uid] .
" endpoint="/alter" data-dirty="false">
  <div class="runnable-pane runnable-pane-query">
    <div class="topbar">
      <div class="row">
        <div class="col-7">
          <span class="pane-title">
            Endpoint: /alter
            <span class="server-switch">
              Dgraph:&nbsp;<span class="url">
                http://localhost:8080
              </span>&nbsp;<a class="btn-change" href="#"><i class="fa fa-edit"></i></a>
            </span>
          </span>
        </div>
        <div class="col-5">
          <div class="actions pull-right">
            <a class="code-btn" data-action="reset" href="#">Reset</a>
            <a class="code-btn" data-action="run" href="#">Run</a>
          </div>
        </div>
      </div>
    </div>

    <div class="runnable-content runnable-code">
      <div class="runnable-tab-content active">
        <textarea class="query-content-editable"># Define Directives and index

director.film: [uid] @reverse .
genre: [uid] @reverse .
initial_release_date: dateTime @index(year) .
name: string @index(exact, term) @lang .
starring: [uid] .
performance.film: [uid] .
performance.character_note: string .
performance.character: [uid] .
performance.actor: [uid] .
performance.special_performance_type: [uid] .
type: [uid] .
</textarea>
      </div>
    </div>

    <div class="row footer">
      <div class="col-12">
        <div class="actions pull-right">

        </div>
      </div>
    </div>
  </div>

  <div class="runnable-pane runnable-pane-output">
    <div class="row topbar">
      <div class="col-12">
        <span class="pane-title">
          Response
        </span>
      </div>
    </div>

    <div class="runnable-content runnable-output" style="background: url('https://tour.dgraph.io//images/dgraph-black.png'); background-repeat: no-repeat; background-position: center; background-color: #fff;">
      <pre class="output-container empty"><code class="output" tabindex="-1"></code></pre>
    </div>

    <div class="row footer">
      <div class="col-12 col-sm-8">
        <div class="latency-info hidden">
          <div class="stat server-latency">
            <span class="label">Server latency:</span> <span class="number"></span> <i class="fa fa-question-circle server-latency-tooltip-trigger" data-toggle="tooltip" data-placement="top" data-html="true" title="Latency information" data-animation="false"></i>
          </div>
          <div class="stat network-latency">
            <span class="label">Network latency:</span> <span class="number"></span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<style>
  .modal.show {
    display: block;
    opacity: 1;
    background-color: rgba(0,0,0,0.3);
  }
</style>
<div class="modal fade runnable-url-modal" tabindex="-1" role="dialog"
  aria-labelledby="runnable-url-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="runnable-url-modal-label">Change Dgraph Alpha URL</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form>
            <div class="form-group">
              <label for="inputDgraphUrl">Dgraph Alpha Address</label>
              <input type="text" class="form-control" id="inputDgraphUrl" placeholder="http://localhost:8080">
              
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="code-btn" data-action="default-url">Reset to Default</button>
        <button type="button" class="code-btn" data-action="apply">Apply</button>
      </div>
    </div>
  </div>
</div>

      
    </div>
  </div>
</div>

    </main>

    <script src="https://tour.dgraph.io//js/build/dgraph-tour.js?6aec6e1a029d764cfc1f4b491bb7c502"></script>
    <script src="//unpkg.com/@dgraph-io/community"></script>
  </body>

</html>

