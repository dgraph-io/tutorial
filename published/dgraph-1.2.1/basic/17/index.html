



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link
  rel="manifest"
  href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/manifest.json"
  >
<link
  rel="mask-icon"
  href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/safari-pinned-tab.svg"
  color="#fe2c06"
  >
<link
  rel="shortcut icon"
  href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/favicon.ico"
  >
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/browserconfig.xml">

<link rel="apple-touch-icon" sizes="57x57" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/apple-touch-icon-180x180.png">
<link rel="icon" sizes="32x32" type="image/png" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/favicon-32x32.png">
<link rel="icon" sizes="192x192" type="image/png" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/android-chrome-192x192.png">
<link rel="icon" sizes="194x194" type="image/png" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/favicon-194x194.png">
<link rel="icon" sizes="96x96" type="image/png" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/favicon-96x96.png">
<link rel="icon" sizes="16x16" type="image/png" href="https://tour.dgraph.io/dgraph-1.2.1/images/favicons/favicon-16x16.png">


    
    <title>
      
        Facets : Edge attributes — A Tour of Dgraph
      
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
      />
    <link
      href="https://fonts.googleapis.com/css?family=Lato:400,700"
      rel="stylesheet"
      />

    <link
      href="https://tour.dgraph.io/dgraph-1.2.1/css/runnable-custom.css?fd581e09310956d9e7e07a71e2d31145"
      rel="stylesheet"
      />
  </head>
  <body>
    <main>


<nav id="header">
  <a href="https://tour.dgraph.io/dgraph-1.2.1" class="brand">
    <img src="https://tour.dgraph.io/dgraph-1.2.1/images/dgraph.svg" alt="dgraph" class="logo" />
    <span class="name">
      A Tour of Dgraph
    </span>
  </a>
  <select id="tour-release" class="select-release">
      
        <option
          value="master"
          
        >
          Dgraph master
        </option>
      
        <option
          value="1.2.1"
          
            selected="selected"
          
        >
          Dgraph 1.2.1
        </option>
      
        <option
          value="1.1.0"
          
        >
          Dgraph 1.1.0
        </option>
      
  </select>

  <div class="menus">
    <a href="#toggle-sidebar" data-action="toggle-sidebar" class="menu-item">
      <i class="fa fa-bars"></i>
    </a>
  </div>
</nav>

<script>
  window.DgTour = {
    thisRelease: "1.2.1",
    latestRelease: "1.2.1"
  }
</script>




<style>
  .hidden { opacity: 0; }
</style>
<aside id="sidebar" class="hidden">
  
  <ul class="categories">
    <li>
      <div class="category">
        Introduction
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/intro/1/" class="topic">
              Welcome
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/2/" class="topic">
              Run Dgraph
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/3/" class="topic">
              Load Schema
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/4/" class="topic">
              Load Data
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/5/" class="topic">
              Mutation Introduction
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/6/" class="topic">
              Graphs
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/7/" class="topic">
              Graph Databases
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/intro/8/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Basic GraphQL&#43;- features
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/basic/1/" class="topic">
              Hello World
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/2/" class="topic">
              Graphs as results
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/3/" class="topic">
              Data types, Schema and Type System
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/4/" class="topic">
              Language Support
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/5/" class="topic">
              Queries describe graphs
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/6/" class="topic">
              Functions and filtering
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/7/" class="topic">
              AND, OR and NOT
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/8/" class="topic">
              Sorting (orderasc or orderdesc)
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/9/" class="topic">
              Pagination (first, offset and after)
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/10/" class="topic">
              Count
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/11/" class="topic">
              How Dgraph Search Works
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/12/" class="topic">
              Has
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/13/" class="topic">
              Alias
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/14/" class="topic">
              Cascade
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/15/" class="topic">
              Normalize
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/16/" class="topic">
              Comments
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/17/" class="topic active">
              Facets : Edge attributes
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/basic/18/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Schema - describe your data
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/schema/1/" class="topic">
              Adding schema - mutating schema
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/2/" class="topic">
              Adding Data - mutating data
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/3/" class="topic">
              External Identifiers
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/4/" class="topic">
              Language Support
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/5/" class="topic">
              Reverse edges
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/6/" class="topic">
              Reverse edges Query
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/7/" class="topic">
              Exercise : Integrating existing data
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/8/" class="topic">
              Deleting Data
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/9/" class="topic">
              Expand Predicate
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/schema/10/" class="topic">
              Congratulations
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Data, More Data
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/moredata/1/" class="topic">
              A bigger dataset
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/moredata/2/" class="topic">
              Movies Schema
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Query Blocks, Query Variables and Aggregation
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/1/" class="topic">
              Multiple Named Query Blocks
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/2/" class="topic">
              Query Variables
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/3/" class="topic">
              Query Variables in a child block
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/4/" class="topic">
              Query Variables in another query block I
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/5/" class="topic">
              Query Variables in another query block II
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/6/" class="topic">
              Exercise: Query Variables linking queries
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/7/" class="topic">
              Value variables - min and max
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/8/" class="topic">
              Exercise : Value variables - sum and avg
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/9/" class="topic">
              Value variables: filtering and ordering
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/10/" class="topic">
              Value variables: math functions
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/11/" class="topic">
              Exercise : Latest Movies
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/12/" class="topic">
              GroupBy
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/blocksvars/13/" class="topic">
              Congratulations!
            </a>
          </li>
        
      </ul>
    </li>
  
  <ul class="categories">
    <li>
      <div class="category">
        Search - more ways to find nodes
      </div>

      <ul class="topics">
        
        
          <li>
            <a href="/dgraph-1.2.1/search/1/" class="topic">
              Indexes
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/2/" class="topic">
              Term search
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/3/" class="topic">
              Regular Expressions
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/4/" class="topic">
              Exact index and inequality
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/5/" class="topic">
              Full Text Search
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/6/" class="topic">
              Full Text Search : language support
            </a>
          </li>
        
          <li>
            <a href="/dgraph-1.2.1/search/7/" class="topic">
              Geo queries : Near
            </a>
          </li>
        
      </ul>
    </li>
  
</aside>


<div class="lesson-content-wrapper container-fluid">
  <div class="content row vertical-stretch">
    <div class="col-12 col-sm-12 col-md-12 col-lg-6 vertical-stretch">
      <div class="panel">
        <div class="body">
          <h1 class="lesson-heading">Facets : Edge attributes</h1>

          <div>
            <p>Dgraph supports facets — key value pairs on edges — as an extension to RDF triples. That is, facets add properties to edges, rather than to nodes. For example, a friend edge between two nodes may have a boolean property of close friendship. Facets can also be used as weights for edges.</p>
<p>More details about Facets you can find in our Docs: <a href="https://docs.dgraph.io/query-language/#facets-edge-attributes">https://docs.dgraph.io/query-language/#facets-edge-attributes</a></p>
<p>Reading all the documentation about Facets you will have examples of:</p>
<ul>
<li>Facets on scalar predicates</li>
<li>Alias with facets</li>
<li>Facets on UID predicates</li>
<li>Filtering on facets</li>
<li>Sorting using facets</li>
<li>Assigning Facet values to a variable</li>
<li>Facets and Variable Propagation</li>
<li>Facets and Aggregation</li>
</ul>
<p>For JSON mutation with Facets see: <a href="https://docs.dgraph.io/mutations/#facets">https://docs.dgraph.io/mutations/#facets</a></p>
<p>Run this mutation on you terminal, before running the query:

<div class="expandable">
  <a data-action="toggle-expandable" href="#expand">
    <i class="fa fa-caret-down"></i> Show answer
  </a>
  <div class="expandable-content">
    <pre><code>curl -H &quot;Content-Type: application/rdf&quot; localhost:8080/mutate?commitNow=true -XPOST -d $'
{
  set {

    # -- Facets on scalar predicates
    _:alice &lt;name&gt; &quot;Alice&quot; .
    _:alice &lt;mobile&gt; &quot;040123456&quot; (since=2006-01-02T15:04:05) .
    _:alice &lt;car&gt; &quot;MA0123&quot; (since=2006-02-02T13:01:09, first=true) .

    _:bob &lt;name&gt; &quot;Bob&quot; .
    _:bob &lt;car&gt; &quot;MA0134&quot; (since=2006-02-02T13:01:09) .

    _:charlie &lt;name&gt; &quot;Charlie&quot; .
    _:dave &lt;name&gt; &quot;Dave&quot; .


    # -- Facets on UID predicates
    _:alice &lt;friend&gt; _:bob (close=true, relative=false) .
    _:alice &lt;friend&gt; _:charlie (close=false, relative=true) .
    _:alice &lt;friend&gt; _:dave (close=true, relative=true) .


    # -- Facets for variable propagation
    _:movie1 &lt;name&gt; &quot;Movie 1&quot; .
    _:movie2 &lt;name&gt; &quot;Movie 2&quot; .
    _:movie3 &lt;name&gt; &quot;Movie 3&quot; .

    _:alice &lt;rated&gt; _:movie1 (rating=3) .
    _:alice &lt;rated&gt; _:movie2 (rating=2) .
    _:alice &lt;rated&gt; _:movie3 (rating=5) .

    _:bob &lt;rated&gt; _:movie1 (rating=5) .
    _:bob &lt;rated&gt; _:movie2 (rating=5) .
    _:bob &lt;rated&gt; _:movie3 (rating=5) .

    _:charlie &lt;rated&gt; _:movie1 (rating=2) .
    _:charlie &lt;rated&gt; _:movie2 (rating=5) .
    _:charlie &lt;rated&gt; _:movie3 (rating=1) .
  }
}' | python -m json.tool | less
</code></pre>
  </div>
</div>
</p>
<h3 id="add-multiple-attributes-to-a-third-single-node">Add multiple attributes to a third single node</h3>
<p>Sometimes you need two Edges with distinct predicates pointing to the same node. This feature can be used to &ldquo;explain the relationship&rdquo; of nodes.</p>
<p>Let&rsquo;s say you have a existing Node that&rsquo;s your target his UID is &ldquo;0x0f43&rdquo;. So you need to setup your RDF like this.</p>
<pre><code>_:MyNode &lt;predicate1&gt; &lt;0x0f43&gt; ( foo=bar, and=1 ) .
_:MyNode &lt;predicate2&gt; &lt;0x0f43&gt; ( bar=bar, and=2 ) .
_:MyNode &lt;predicate3&gt; &lt;0x0f43&gt; ( bar=bar, and=3 ) .
</code></pre><p>more examples:

<div class="expandable">
  <a data-action="toggle-expandable" href="#expand">
    <i class="fa fa-caret-down"></i> Show answer
  </a>
  <div class="expandable-content">
    <pre><code>_:MyNode &lt;Morning&gt; &lt;0x0f43&gt; ( foo=true, and=1 , since=2006-02-02T13:01:09 ) .
_:MyNode &lt;Evening&gt; &lt;0x0f43&gt; ( bar=false, and=2, since=2006-02-02T13:01:09 ) .
_:MyNode &lt;Night&gt;   &lt;0x22&gt;   ( bar=true, and=3,  since=2006-02-02T13:01:09 ) .
</code></pre>
  </div>
</div>
</p>
<p>If you do the same mutation above but using the same predicates instead of unique one. You will override the Edge attribute. Line by line. So you must to use distinct predicates.</p>

          </div>
        </div>

        <div class="page-nav">
          
            <a href="/dgraph-1.2.1/basic/16" data-action="go-prev" class="btn btn-secondary btn-sm page-nav-link"><i class="fa fa-chevron-left"></i></a>
          
          <div class="nav-index">
            17 / 18
          </div>
          
            <a href="/dgraph-1.2.1/basic/18" data-action="go-next" class="btn btn-secondary btn-sm page-nav-link"><i class="fa fa-chevron-right"></i></a>
          
        </div>
      </div>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-6 vertical-stretch">
      
        
<div class="runnable" data-initial="{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}" data-current="{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}" endpoint="/query" data-dirty="false">
  <div class="runnable-pane runnable-pane-query">
    <div class="topbar">
      <div class="row">
        <div class="col-7">
          <span class="pane-title">
            Endpoint: /query
            <span class="server-switch">
              Dgraph:&nbsp;<span class="url">
                http://localhost:8080
              </span>&nbsp;<a class="btn-change" href="#"><i class="fa fa-edit"></i></a>
            </span>
          </span>
        </div>
        <div class="col-5">
          <div class="actions pull-right">
            <a class="code-btn" data-action="reset" href="#">Reset</a>
            <a class="code-btn" data-action="run" href="#">Run</a>
          </div>
        </div>
      </div>
    </div>

    <div class="runnable-content runnable-code">
      <div class="runnable-tab-content active">
        <textarea class="query-content-editable">{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}</textarea>
      </div>
    </div>

    <div class="row footer">
      <div class="col-12">
        <div class="actions pull-right">

        </div>
      </div>
    </div>
  </div>

  <div class="runnable-pane runnable-pane-output">
    <div class="row topbar">
      <div class="col-12">
        <span class="pane-title">
          Response
        </span>
      </div>
    </div>

    <div class="runnable-content runnable-output" style="background: url('https://tour.dgraph.io/dgraph-1.2.1/images/dgraph-black.png'); background-repeat: no-repeat; background-position: center; background-color: #fff;">
      <pre class="output-container empty"><code class="output" tabindex="-1"></code></pre>
    </div>

    <div class="row footer">
      <div class="col-12 col-sm-8">
        <div class="latency-info hidden">
          <div class="stat server-latency">
            <span class="label">Server latency:</span> <span class="number"></span> <i class="fa fa-question-circle server-latency-tooltip-trigger" data-toggle="tooltip" data-placement="top" data-html="true" title="Latency information" data-animation="false"></i>
          </div>
          <div class="stat network-latency">
            <span class="label">Network latency:</span> <span class="number"></span>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<style>
  .modal.show {
    display: block;
    opacity: 1;
    background-color: rgba(0,0,0,0.3);
  }
</style>
<div class="modal fade runnable-url-modal" tabindex="-1" role="dialog"
  aria-labelledby="runnable-url-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="runnable-url-modal-label">Change Dgraph Alpha URL</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form>
            <div class="form-group">
              <label for="inputDgraphUrl">Dgraph Alpha Address</label>
              <input type="text" class="form-control" id="inputDgraphUrl" placeholder="http://localhost:8080">
              
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="code-btn" data-action="default-url">Reset to Default</button>
        <button type="button" class="code-btn" data-action="apply">Apply</button>
      </div>
    </div>
  </div>
</div>

      
    </div>
  </div>
</div>

    </main>

    <script src="https://tour.dgraph.io/dgraph-1.2.1/js/build/dgraph-tour.js?6aec6e1a029d764cfc1f4b491bb7c502"></script>
    <script src="//unpkg.com/@dgraph-io/community"></script>
  </body>

</html>

