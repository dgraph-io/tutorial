



<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="apple-touch-icon" sizes="57x57" href="https://dgraph.io/assets/images/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://dgraph.io/assets/images/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://dgraph.io/assets/images/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://dgraph.io/assets/images/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://dgraph.io/assets/images/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://dgraph.io/assets/images/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://dgraph.io/assets/images/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://dgraph.io/assets/images/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://dgraph.io/assets/images/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://dgraph.io/assets/images/favicons/android-icon-192x192.png">
<link rel="manifest" href="https://dgraph.io/assets/images/favicons/manifest.json">
<link rel="icon" type="image/png" sizes="32x32" href="https://dgraph.io/assets/images/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://dgraph.io/assets/images/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://dgraph.io/assets/images/faviconsfavicon-16x16.png">
<link rel="shortcut icon" href="https://dgraph.io/assets/images/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://dgraph.io/assets/images/faviconsms-icon-144x144.png">
<meta name="msapplication-config" content="https://dgraph.io/assets/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


    
    <title>
      
        Facets : Edge attributes — A Tour of Dgraph
      
    </title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500&display=swap" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link href="https://dgraph.io/assets/css/style.min.css?05062020-2" rel="stylesheet" type="text/css" />
    <link href="https://dgraph.io/tour/dgraph-20.03.0/css/runnable-custom.css?fd581e09310956d9e7e07a71e2d31145" rel="stylesheet"/>

    <link href="https://dgraph.io/tour/dgraph-20.03.0/css/font-awesome/css/all.css" rel="stylesheet"/>

    
    <script type="text/javascript">
  		(function(w,d,s,l,i){w[l]=w[l]||[];
  		w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
  		var f=d.getElementsByTagName(s)[0],j=d.createElement(s),
  		dl=l!='dataLayer'?'&l='+l:'';j.async=true;
  		j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
  		f.parentNode.insertBefore(j,f);
  		})(window,document,'script','dataLayer','GTM-K8KPL5S');
  	</script>
    

  	
  	<script async src="https://www.googletagmanager.com/gtag/js?id=AW-666192333"></script>
  	<script>
        window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'AW-666192333');
    </script>
  </head>
  <body>
    <main>


<body class="tour">

    <header id="page-header" class="page-header">
	<div class="page-logo">
		<a href="https://dgraph.io/">
			<img src="https://dgraph.io/assets/images/logo.svg">
		</a>
	</div>
	<nav class="page-nav">
    <ul>
        <li>
            <div data-label="Products">
                <span>Products</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/graphql" data-label="GraphQL">
                        <span>GraphQL</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/enterprise" data-label="Enterprise">
                        <span>Enterprise</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/downloads" data-label="Downloads">
                        <span>Downloads</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Learn" class="is-active">
                <span>Learn</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/blog/" data-label="Blog">
                        <span>Blog</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/tour/" target="_blank" data-label="Interactive Tour">
                        <span>Interactive Tour</span>
                    </a>
                </li>
                <li>
                    <a href="https://discuss.dgraph.io" target="_blank" data-label="Forum">
                        <span>Forum</span>
                    </a>
                </li>
                <li>
                    <a href="https://slack.dgraph.io" target="_blank" data-label="Slack">
                        <span>Slack</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Docs"><span>Docs</span></div>
            <ul>
                <li>
                    <a href="https://docs.dgraph.io" target="_blank" data-label="Dgraph Docs">
                        <span>Dgraph Docs</span>
                    </a>
                </li>
                <li>
                    <a href="https://graphql.dgraph.io/docs/" target="_blank" data-label="GraphQL Docs">
                        <span>GraphQL Docs</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Company"><span>Company</span></div>
            <ul>
                <li>
                    <a href="https://dgraph.io/about" data-label="Team">
                        <span>Team</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/careers" data-label="Careers">
                        <span>Careers</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/contact" data-label="Contact">
                        <span>Contact</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/conduct" data-label="Conduct">
                        <span>Conduct</span>
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</nav>

	<div class="page-cta">
    <ul>
        <li class="hide-tablet">
            <a href="https://dgraph.io/tour/dgraph-20.03.0/contact" title="Contact">Contact</a>
        </li>
        <li>
            <a href="https://dgraph.io/tour/dgraph-20.03.0/downloads" title="Download" class="button button--secondary">
                <span>Download</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </li>
    </ul>
</div>

</header>




    <div class="page-intro page-intro__narrow">
        <div class="container__full">

            <aside class="page-subnav">

    <div class="page-subnav__header">
        <a href="https://dgraph.io/tour/dgraph-20.03.0">
            <i class="fad fa-angle-double-left page-subnav__back"></i>
            <h1 class="page-subnav__title">A Tour of Dgraph</h1>
        </a>
    </div>

    <div class="page-subnav__labels"><a class="page-subnav__label" href="https://dgraph.io/tour/dgraph-20.03.0/intro/1/">
                <span>Introduction</span>
            </a>
        <a class="page-subnav__label is-active" href="https://dgraph.io/tour/dgraph-20.03.0/basic/1/">
                <span>Basic Features</span>
            </a>
        <a class="page-subnav__label" href="https://dgraph.io/tour/dgraph-20.03.0/schema/1/">
                <span>Schema</span>
            </a>
        <a class="page-subnav__label" href="https://dgraph.io/tour/dgraph-20.03.0/moredata/1/">
                <span>Data, More Data</span>
            </a>
        <a class="page-subnav__label" href="https://dgraph.io/tour/dgraph-20.03.0/blocksvars/1/">
                <span>Query Blocks, &amp; Variables</span>
            </a>
        <a class="page-subnav__label" href="https://dgraph.io/tour/dgraph-20.03.0/search/1/">
                <span>Search</span>
            </a>
        
    </div>

</aside>


        </div>
    </div>

    <section class="page-body">
        <div class="page-body__content">

            <div class="lesson">

                
                    <a href="https://dgraph.io/tour/dgraph-20.03.0/basic/16" data-action="go-prev" class="lesson__prev">
                        <span>
                            <i class="fad fa-angle-double-left"></i>
                        </span>
                    </a>
                

                <div class="lesson__content">
                    <div>

                        <h2 class="lesson__title">Facets : Edge attributes</h2>

                        <p>Dgraph supports facets — key value pairs on edges — as an extension to RDF triples. That is, facets add properties to edges, rather than to nodes. For example, a friend edge between two nodes may have a boolean property of close friendship. Facets can also be used as weights for edges.</p>
<p>More details about Facets you can find in our Docs: <a href="https://dgraph.io/docs/query-language/#facets-edge-attributes">https://dgraph.io/docs/query-language/#facets-edge-attributes</a></p>
<p>Reading all the documentation about Facets you will have examples of:</p>
<ul>
<li>Facets on scalar predicates</li>
<li>Alias with facets</li>
<li>Facets on UID predicates</li>
<li>Filtering on facets</li>
<li>Sorting using facets</li>
<li>Assigning Facet values to a variable</li>
<li>Facets and Variable Propagation</li>
<li>Facets and Aggregation</li>
</ul>
<p>For JSON mutation with Facets see: <a href="https://dgraph.io/docs/mutations/#facets">https://dgraph.io/docs/mutations/#facets</a></p>
<p>Run this mutation on you terminal, before running the query:

<div class="expandable">
  <a data-action="toggle-expandable" href="#expand">
    <i class="fa fa-caret-down"></i> Show answer
  </a>
  <div class="expandable-content">
    <pre><code>curl -H &quot;Content-Type: application/rdf&quot; localhost:8080/mutate?commitNow=true -XPOST -d $'
{
  set {

    # -- Facets on scalar predicates
    _:alice &lt;name&gt; &quot;Alice&quot; .
    _:alice &lt;mobile&gt; &quot;040123456&quot; (since=2006-01-02T15:04:05) .
    _:alice &lt;car&gt; &quot;MA0123&quot; (since=2006-02-02T13:01:09, first=true) .

    _:bob &lt;name&gt; &quot;Bob&quot; .
    _:bob &lt;car&gt; &quot;MA0134&quot; (since=2006-02-02T13:01:09) .

    _:charlie &lt;name&gt; &quot;Charlie&quot; .
    _:dave &lt;name&gt; &quot;Dave&quot; .


    # -- Facets on UID predicates
    _:alice &lt;friend&gt; _:bob (close=true, relative=false) .
    _:alice &lt;friend&gt; _:charlie (close=false, relative=true) .
    _:alice &lt;friend&gt; _:dave (close=true, relative=true) .


    # -- Facets for variable propagation
    _:movie1 &lt;name&gt; &quot;Movie 1&quot; .
    _:movie2 &lt;name&gt; &quot;Movie 2&quot; .
    _:movie3 &lt;name&gt; &quot;Movie 3&quot; .

    _:alice &lt;rated&gt; _:movie1 (rating=3) .
    _:alice &lt;rated&gt; _:movie2 (rating=2) .
    _:alice &lt;rated&gt; _:movie3 (rating=5) .

    _:bob &lt;rated&gt; _:movie1 (rating=5) .
    _:bob &lt;rated&gt; _:movie2 (rating=5) .
    _:bob &lt;rated&gt; _:movie3 (rating=5) .

    _:charlie &lt;rated&gt; _:movie1 (rating=2) .
    _:charlie &lt;rated&gt; _:movie2 (rating=5) .
    _:charlie &lt;rated&gt; _:movie3 (rating=1) .
  }
}' | python -m json.tool | less
</code></pre>
  </div>
</div>
</p>
<h3 id="add-multiple-attributes-to-a-third-single-node">Add multiple attributes to a third single node</h3>
<p>Sometimes you need two Edges with distinct predicates pointing to the same node. This feature can be used to &ldquo;explain the relationship&rdquo; of nodes.</p>
<p>Let&rsquo;s say you have a existing Node that&rsquo;s your target his UID is &ldquo;0x0f43&rdquo;. So you need to setup your RDF like this.</p>
<pre><code>_:MyNode &lt;predicate1&gt; &lt;0x0f43&gt; ( foo=bar, and=1 ) .
_:MyNode &lt;predicate2&gt; &lt;0x0f43&gt; ( bar=bar, and=2 ) .
_:MyNode &lt;predicate3&gt; &lt;0x0f43&gt; ( bar=bar, and=3 ) .
</code></pre><p>more examples:

<div class="expandable">
  <a data-action="toggle-expandable" href="#expand">
    <i class="fa fa-caret-down"></i> Show answer
  </a>
  <div class="expandable-content">
    <pre><code>_:MyNode &lt;Morning&gt; &lt;0x0f43&gt; ( foo=true, and=1 , since=2006-02-02T13:01:09 ) .
_:MyNode &lt;Evening&gt; &lt;0x0f43&gt; ( bar=false, and=2, since=2006-02-02T13:01:09 ) .
_:MyNode &lt;Night&gt;   &lt;0x22&gt;   ( bar=true, and=3,  since=2006-02-02T13:01:09 ) .
</code></pre>
  </div>
</div>
</p>
<p>If you do the same mutation above but using the same predicates instead of unique one. You will override the Edge attribute. Line by line. So you must to use distinct predicates.</p>


                    </div>
                </div>

                
                <div class="lesson__code">

                    
<div class="runnable" data-initial="{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}" data-current="{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}" endpoint="/query" data-dirty="false">
  <div class="runnable-pane runnable-pane-query">
    <div class="topbar">
      <div class="pane-title">
        <span>Endpoint: /query</span>
      </div>

      <span class="server-switch">
        <span>Dgraph:</span>
        <span class="url">http://localhost:8080</span>
        <a class="btn-change" href="#">
            <i class="far fa-edit"></i>
        </a>
      </span>

      <div class="actions">
        <a class="button button--small button--outline" data-action="reset" href="#">Reset</a>
        <a class="button button--small" data-action="run" href="#">Run</a>
      </div>
    </div>

    <div class="runnable-content runnable-code">
      <div class="runnable-tab-content active">
        <textarea class="query-content-editable">{
  data(func: eq(name, &#34;Alice&#34;)) {
     name
     mobile @facets
     car @facets
  }
}</textarea>
      </div>
    </div>

    <div class="footer">
      <div class="actions">

    </div>
    </div>
  </div>

  <div class="runnable-pane runnable-pane-output">
    <div class="topbar">
      <div class="pane-title">
         Response
      </div>
    </div>

    <div class="runnable-content runnable-output">
      <pre class="output-container empty"><code class="output" tabindex="-1"></code></pre>
    </div>

    <div class="footer">
      <div class="latency-info hidden">
          <div class="stat server-latency">
            <span class="label">Server latency:</span> <span class="number"></span> <i class="fa fa-question-circle server-latency-tooltip-trigger" data-toggle="tooltip" data-placement="top" data-html="true" title="Latency information" data-animation="false"></i>
          </div>
          <div class="stat network-latency">
            <span class="label">Network latency:</span> <span class="number"></span>
          </div>
        </div>
    </div>

  </div>
</div>

<style>
  .modal.show {
    display: block;
    opacity: 1;
    background-color: rgba(0,0,0,0.3);
  }
</style>
<div class="modal fade runnable-url-modal" tabindex="-1" role="dialog"
  aria-labelledby="runnable-url-modal-label" aria-hidden="true">
  <div class="modal-dialog modal-md" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="runnable-url-modal-label">Change Dgraph Alpha URL</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container-fluid">
          <form>
            <div class="form-group">
              <label for="inputDgraphUrl">Dgraph Alpha Address</label>
              <input type="text" class="form-control" id="inputDgraphUrl" placeholder="http://localhost:8080" style="padding:0 4px;">
              
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="code-btn" data-action="default-url">Reset to Default</button>
        <button type="button" class="code-btn" data-action="apply">Apply</button>
      </div>
    </div>
  </div>
</div>


                </div>
                

                
                    <a href="https://dgraph.io/tour/dgraph-20.03.0/basic/18" data-action="go-next" class="lesson__next">
                        <span>
                            <i class="fad fa-angle-double-right"></i>
                        </span>
                    </a>
                

                <nav class="lesson__navigation">

                    
                        <a href="https://dgraph.io/tour/dgraph-20.03.0/basic/16" data-action="go-prev" class="lesson__prev">
                            <span>
                                <i class="fad fa-angle-double-left"></i>
                            </span>
                        </a>
                    

                    <div>
                        17 / 18
                    </div>

                    
                        <a href="https://dgraph.io/tour/dgraph-20.03.0/basic/18" data-action="go-next" class="lesson__next">
                            <span>
                                <i class="fad fa-angle-double-right"></i>
                            </span>
                        </a>
                    

                </nav>

            </div>

        </div>
    </section>

    <footer class="page-footer">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Products</h3>
            <ul>
              <li><a href="https://dgraph.io/graphql">GraphQL</a></li>
              <li><a href="https://dgraph.io/enterprise">Enterprise</a></li>
              <li><a href="https://dgraph.io/downloads">Downloads</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Learn</h3>
            <ul>
              <li><a href="https://dgraph.io/blog/" target="_blank">Blog</a></li>
              <li><a href="https://dgraph.io/tour/" target="_blank">Interactive Tour</a></li>
              <li><a href="https://discuss.dgraph.io" target="_blank">Forum</a></li>
              <li><a href="https://slack.dgraph.io" target="_blank">Slack</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Docs</h3>
            <ul>
              <li><a href="https://docs.dgraph.io" target="_blank">Dgraph Docs</a></li>
              <li><a href="https://graphql.dgraph.io/docs/" target="_blank">GraphQL Docs</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Company</h3>
            <ul>
              <li><a href="https://dgraph.io/about">Team</a></li>
              <li><a href="https://dgraph.io/careers">Careers</a></li>
              <li><a href="https://dgraph.io/contact">Contact</a></li>
              <li><a href="https://dgraph.io/conduct">Conduct</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 offset-lg-1 border-above-sm">
        <div class="page-footer__cta"><a href="https://dgraph.io/downloads" title="Download" class="button button--secondary"><span>Download</span><i class="fas fa-arrow-right"></i></a></div>
        <div class="page-footer__address">
          <p>
            655 Montgomery Street, 7th Floor<br>
            San Francisco, CA 94111
          </p>
          <hr>
          <p><a href="mailto:contact@dgraph.io">contact@dgraph.io</a></p>
        </div>
      </div>
    </div>
    <div class="page-footer__social">
      <ul>
        <li><a href="https://twitter.com/dgraphlabs" target="_blank"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://github.com/dgraph-io/dgraph" target="_blank"><i class="fab fa-github"></i></a></li>
        <li><a href="https://www.youtube.com/channel/UCghE41LR8nkKFlR3IFTRO4w" target="_blank"><i class="fab fa-youtube"></i></a></li>
        <li><a href="https://slack.dgraph.io" target="_blank"><i class="fab fa-slack"></i></a></li>
        <li><a href="https://www.linkedin.com/company/dgraph-labs" target="_blank"><i class="fab fa-linkedin"></i></a></li>
      </ul>
    </div>
    <div class="page-footer__copyright">
      <p>
        <Copyright>&copy; 2017-2020 Dgraph Labs, Inc.</Copyright>
      </p>
    </div>
  </div>
</footer>


</body>

    <script src="https://dgraph.io/tour/dgraph-20.03.0/js/build/dgraph-tour.js"></script>
    <script src="//unpkg.com/@dgraph-io/community"></script>

</html>

